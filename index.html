<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For My Baccha ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Handwritten font -->
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  height:100vh;
  background:
    radial-gradient(circle at top,#ff8fab,#ff477e,#c9184a 70%);
  font-family:'Segoe UI',sans-serif;
  color:white;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* Soft pink glow */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center,rgba(255,180,200,.25),transparent 60%);
  animation:pulse 4s infinite alternate;
  pointer-events:none;
}
@keyframes pulse{from{opacity:.5}to{opacity:1}}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

.box{
  position:relative;
  z-index:2;
  background:rgba(0,0,0,.35);
  backdrop-filter:blur(12px);
  padding:30px;
  border-radius:26px;
  width:88%;
  max-width:420px;
  text-align:center;
  box-shadow:0 0 40px rgba(255,100,150,.6);
}

.hidden{display:none}

button{
  margin-top:18px;
  padding:12px 26px;
  border:none;
  border-radius:25px;
  background:#ff2e63;
  color:white;
  font-size:1em;
  cursor:pointer;
}
button:hover{background:#ff1744}

/* Scroll */
.scroll{
  background:linear-gradient(#ffe6ea,#ffd1dc);
  color:#7a1331;
  padding:30px;
  border-radius:16px;
  box-shadow:0 0 30px rgba(0,0,0,.6);
  font-family:'Dancing Script',cursive;
  font-size:1.2em;
  animation:unroll 1.8s ease forwards;
}
@keyframes unroll{
  from{transform:scaleY(0);opacity:0}
  to{transform:scaleY(1);opacity:1}
}
</style>
</head>

<body>

<canvas id="fx"></canvas>

<div class="box">

<!-- Countdown -->
<div id="lock">
  <h1>Waiting for New Year ‚ù§Ô∏è</h1>
  <p id="countdown"></p>
</div>

<!-- Intro -->
<div id="page0" class="hidden">
  <h1>A little surprise for you</h1>
  <p>Baccha ‚ù§Ô∏è</p>
  <button onclick="next()">Continue</button>
</div>

<!-- Final Scroll -->
<div id="page1" class="hidden">
  <div class="scroll">
    <h1>üìú Happy New Year, Baccha ‚ù§Ô∏è</h1>
    <p>
      Happy New Year, my Baccha ‚ù§Ô∏è<br><br>
      Each moment with you is a new beginning,
      and I can‚Äôt wait to create a thousand more memories with you this year. ‚ò∫Ô∏è<br><br>
      May our bond grow deeper,
      our laughter louder,
      and our dreams bigger in 2026. üòå<br><br>
      You‚Äôre my favorite part of every year. üí´
    </p>

    <!-- SONG BUTTON (FIXED) -->
    <button onclick="playSong()">üéµ Play Song</button>
  </div>
</div>

</div>

<!-- AUDIO -->
<audio id="song" src="song.mp3" preload="auto"></audio>

<script>
/* COUNTDOWN LOCK */
const newYear = new Date("January 1, 2026 00:00:00").getTime();
setInterval(()=>{
  const d = newYear - Date.now();
  if(d<=0){
    lock.classList.add("hidden");
    page0.classList.remove("hidden");
    return;
  }
  countdown.innerText =
    Math.floor(d/36e5)+"h "+
    Math.floor(d%36e5/6e4)+"m "+
    Math.floor(d%6e4/1000)+"s";
},1000);

/* FLOW */
function next(){
  page0.classList.add("hidden");
  page1.classList.remove("hidden");
}

/* AUDIO + BEAT SYNC */
let audioCtx, analyser, data;
function playSong(){
  const audio = document.getElementById("song");
  audio.play().catch(()=>alert("Tap again to allow music üéµ"));

  if(!audioCtx){
    audioCtx = new AudioContext();
    const src = audioCtx.createMediaElementSource(audio);
    analyser = audioCtx.createAnalyser();
    src.connect(analyser);
    analyser.connect(audioCtx.destination);
    analyser.fftSize = 64;
    data = new Uint8Array(analyser.frequencyBinCount);
  }
}

/* CANVAS EFFECTS */
const c = fx, ctx = c.getContext("2d");
c.width = innerWidth; c.height = innerHeight;

let fireworks=[], stars=[], shooters=[];

/* Constellation points */
for(let i=0;i<18;i++)
  stars.push({x:Math.random()*c.width,y:Math.random()*c.height});

/* Shooting star */
function shoot(){
  shooters.push({x:Math.random()*c.width,y:Math.random()*c.height/2,vx:10,vy:5,l:35});
}

/* Draw loop */
function draw(){
  ctx.clearRect(0,0,c.width,c.height);

  let beat=1;
  if(analyser){
    analyser.getByteFrequencyData(data);
    beat = 1 + data[5]/120;
  }

  /* Constellations */
  ctx.strokeStyle="rgba(255,200,220,.25)";
  stars.forEach((s,i)=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,2,0,Math.PI*2);
    ctx.fill();
    if(i>0){
      ctx.moveTo(stars[i-1].x,stars[i-1].y);
      ctx.lineTo(s.x,s.y);
    }
    ctx.stroke();
  });

  /* Shooting stars */
  if(Math.random()<0.008) shoot();
  shooters.forEach(s=>{
    ctx.strokeStyle="rgba(255,220,230,.9)";
    ctx.beginPath();
    ctx.moveTo(s.x,s.y);
    ctx.lineTo(s.x-25,s.y-12);
    ctx.stroke();
    s.x+=s.vx; s.y+=s.vy; s.l--;
  });
  shooters = shooters.filter(s=>s.l>0);

  /* Beat fireworks */
  if(Math.random()<0.04*beat)
    fireworks.push({x:Math.random()*c.width,y:c.height,vy:6*beat});
  fireworks.forEach(f=>{
    ctx.fillStyle="rgba(255,120,160,.9)";
    ctx.beginPath();
    ctx.arc(f.x,f.y,3*beat,0,Math.PI*2);
    ctx.fill();
    f.y-=f.vy;
  });
  fireworks = fireworks.filter(f=>f.y>Math.random()*c.height/2);

  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>